/**********************************************************************
 *  Project       Harman Car Multimedia System
 *  (c) copyright 2014
 *  Company       Harman/Becker Automotive Systems GmbH
 *                All rights reserved
 **********************************************************************/

/*
 * Generated by DSI Generator version 2.0
 * Date: 21.11.2014
 */


struct _DMMAmFmTunerDiranaControlProxy ;
#define TDSIClient struct _DMMAmFmTunerDiranaControlProxy

/*
 * Remove the const from the attributes for this module.
 */
#define DSICONST


#include "DMMAmFmTunerDiranaControlProxy.h"

static const char* SERVER_NAME = "DMMAmFmTunerDiranaControl" ;
static const int SERVER_MAJOR_VERSION = 1 ;
static const int SERVER_MINOR_VERSION = 1 ;


static void DMMAmFmTunerDiranaControlReadErrorEnumerator( DMMAmFmTunerDiranaControlProxy* proxy, DSIStream* stream )
{
   (void)proxy;
}


static void ProcessResponse( DMMAmFmTunerDiranaControlProxy* proxy, DSIStream* stream, const EventInfo* event )
{
    if ((event == 0) || (proxy == 0))
      return;
   if( event->responseType == RESULT_INVALID )
   {
      DMMAmFmTunerDiranaControlReadErrorEnumerator( proxy, stream );

      if( proxy->fnResponseInvalid )
      {
         proxy->fnResponseInvalid( proxy, (DMMAmFmTunerDiranaControl_UpdateIdEnum)event->requestID );
      }
   }
   else if( event->responseType == RESULT_REQUEST_ERROR
           || event->responseType == RESULT_REQUEST_BUSY
           || event->responseType == RESULT_NOP )   // FIXME remove when MoCCA is fixed
   {
      DMMAmFmTunerDiranaControlReadErrorEnumerator( proxy, stream );

      switch( event->requestID )
      {
      case DMMAmFmTunerDiranaControl_UPD_ID_requestSetAudioRouting:
         if( proxy->fnRequestSetAudioRoutingFailed )
         {
            proxy->fnRequestSetAudioRoutingFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_requestGetAudioRouting:
         if( proxy->fnRequestGetAudioRoutingFailed )
         {
            proxy->fnRequestGetAudioRoutingFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_requestWriteXMem:
         if( proxy->fnRequestWriteXMemFailed )
         {
            proxy->fnRequestWriteXMemFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_requestReadXMem:
         if( proxy->fnRequestReadXMemFailed )
         {
            proxy->fnRequestReadXMemFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_requestWriteYMem:
         if( proxy->fnRequestWriteYMemFailed )
         {
            proxy->fnRequestWriteYMemFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_requestReadYMem:
         if( proxy->fnRequestReadYMemFailed )
         {
            proxy->fnRequestReadYMemFailed( proxy, (DSIResultType)event->responseType );
         }
         break;

      default:
         assert( 0 ); //lint !e506 Constant value Boolean
         break;
      }
   }
   else
   {
      int bSendEvent = 0 ;
      switch( event->requestID )
      {
      case DMMAmFmTunerDiranaControl_UPD_ID_responseSetAudioRouting:
         {
            DMMAmFmTunerDiranaControl_Result result = 0 ;
            DSIRead32( stream, &result ) ;
            if( proxy->fnResponseSetAudioRouting )
            {
               proxy->fnResponseSetAudioRouting( proxy, result );
            }
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_responseGetAudioRouting:
         {
            DMMAmFmTunerDiranaControl_AudioInputs input = 0 ;
            DSIRead32( stream, &input ) ;
            if( proxy->fnResponseGetAudioRouting )
            {
               proxy->fnResponseGetAudioRouting( proxy, input );
            }
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_responseReadXMem:
         {
            DMMAmFmTunerDiranaControl_Result result = 0 ;
            unsigned int memValueX = 0 ;
            DSIRead32( stream, &result ) ;
            DSIRead32( stream, &memValueX ) ;
            if( proxy->fnResponseReadXMem )
            {
               proxy->fnResponseReadXMem( proxy, result, memValueX );
            }
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_responseWriteXMem:
         {
            DMMAmFmTunerDiranaControl_Result result = 0 ;
            DSIRead32( stream, &result ) ;
            if( proxy->fnResponseWriteXMem )
            {
               proxy->fnResponseWriteXMem( proxy, result );
            }
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_responseReadYMem:
         {
            DMMAmFmTunerDiranaControl_Result result = 0 ;
            unsigned short memValueY = 0 ;
            DSIRead32( stream, &result ) ;
            DSIRead16( stream, &memValueY ) ;
            if( proxy->fnResponseReadYMem )
            {
               proxy->fnResponseReadYMem( proxy, result, memValueY );
            }
         }
         break;

      case DMMAmFmTunerDiranaControl_UPD_ID_responseWriteYMem:
         {
            DMMAmFmTunerDiranaControl_Result result = 0 ;
            DSIRead32( stream, &result ) ;
            if( proxy->fnResponseWriteYMem )
            {
               proxy->fnResponseWriteYMem( proxy, result );
            }
         }
         break;

      default:
         assert( 0 ); //lint !e506 Constant value Boolean unknown update id
         break;
      }

      if( bSendEvent && proxy->fnProcessUpdateEvent )
      {
         // notify the user about the update
         proxy->fnProcessUpdateEvent( proxy, (DMMAmFmTunerDiranaControl_UpdateIdEnum)event->requestID );
      }
   }
}

int DMMAmFmTunerDiranaControl_RequestSetAudioRouting( DMMAmFmTunerDiranaControlProxy* proxy,  DMMAmFmTunerDiranaControl_AudioInputs input,  DMMAmFmTunerDiranaControl_AudioOutputs output )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &input ) ;   
   DSIWrite32( &stream, &output ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestSetAudioRouting, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}



int DMMAmFmTunerDiranaControl_RequestGetAudioRouting( DMMAmFmTunerDiranaControlProxy* proxy,  DMMAmFmTunerDiranaControl_AudioOutputs output )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &output ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestGetAudioRouting, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}



int DMMAmFmTunerDiranaControl_RequestWriteXMem( DMMAmFmTunerDiranaControlProxy* proxy,  unsigned int memAddress,  unsigned int memValueX )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &memAddress ) ;   
   DSIWrite32( &stream, &memValueX ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestWriteXMem, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}



int DMMAmFmTunerDiranaControl_RequestReadXMem( DMMAmFmTunerDiranaControlProxy* proxy,  unsigned int memAddress )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &memAddress ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestReadXMem, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}



int DMMAmFmTunerDiranaControl_RequestWriteYMem( DMMAmFmTunerDiranaControlProxy* proxy,  unsigned int memAddress,  unsigned short memValueY )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &memAddress ) ;   
   DSIWrite16( &stream, &memValueY ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestWriteYMem, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}



int DMMAmFmTunerDiranaControl_RequestReadYMem( DMMAmFmTunerDiranaControlProxy* proxy,  unsigned int memAddress )
{
   int seqNr = DSICreateId();
   DSIStream stream ;
   DSIOpen( &stream );   
   DSIWrite32( &stream, &memAddress ) ;
   DSIClientSendRequest( proxy, DMMAmFmTunerDiranaControl_UPD_ID_requestReadYMem, seqNr, &stream );
   DSIClose( &stream );
   return seqNr ;
}





/*******************************************************************************************/

static void ComponentConnected( DMMAmFmTunerDiranaControlProxy* proxy )
{
   if( proxy && proxy->fnComponentConnected )
   {
      proxy->fnComponentConnected( proxy );
   }
}

static void ComponentDisconnected( DMMAmFmTunerDiranaControlProxy* proxy )
{
   if( proxy && proxy->fnComponentDisconnected )
   {
      proxy->fnComponentDisconnected( proxy );
   }
}

static void ProcessInternalEvent( DMMAmFmTunerDiranaControlProxy* proxy, int code, void* data )
{
   if( proxy && proxy->fnProcessInternalEvent )
   {
      proxy->fnProcessInternalEvent( proxy, code, data );
   }
}

static void Cleanup( DMMAmFmTunerDiranaControlProxy* proxy )
{
   if( proxy && proxy->fnCleanup )
   {
      proxy->fnCleanup( proxy );
   }
}

/*** notifications *************************************************************************/

void DMMAmFmTunerDiranaControlProxy_SetNotification( DMMAmFmTunerDiranaControlProxy* proxy, DMMAmFmTunerDiranaControl_UpdateIdEnum updateId )
{
   DSIClientSetNotification( proxy, (int)updateId );
}


void DMMAmFmTunerDiranaControlProxy_ClearNotification( DMMAmFmTunerDiranaControlProxy* proxy, DMMAmFmTunerDiranaControl_UpdateIdEnum updateId )
{
   DSIClientClearNotification( proxy, (int)updateId );
}


void DMMAmFmTunerDiranaControlProxy_ClearAllNotifications( DMMAmFmTunerDiranaControlProxy* proxy )
{
   DSIClientClearAllNotifications( proxy );
}

/*** (de)initialization ********************************************************************/

int DMMAmFmTunerDiranaControlProxy_Init( DMMAmFmTunerDiranaControlProxy* proxy, const char* rolename )
{
   DSIInit();
   if (proxy)
   {
      memset( proxy, 0, sizeof(*proxy) );
   }
   DSIClientInit( proxy, SERVER_NAME, rolename, SERVER_MAJOR_VERSION, SERVER_MINOR_VERSION );
   if (proxy)
   {
	   proxy->client.fnComponentConnected = ComponentConnected ;
	   proxy->client.fnComponentDisconnected = ComponentDisconnected ;
	   proxy->client.fnProcessResponse = ProcessResponse ;
	   proxy->client.fnProcessInternalEvent = ProcessInternalEvent ;
	   proxy->client.fnCleanup = Cleanup ;
   }
   return 0 ;
}

void DMMAmFmTunerDiranaControlProxy_Free( DMMAmFmTunerDiranaControlProxy* proxy  )
{
   if (proxy == 0)
      return;

   DSIClientFree( proxy );

   memset( proxy, 0, sizeof(*proxy) );
}

int DMMAmFmTunerDiranaControlProxy_Start( DMMAmFmTunerDiranaControlProxy* proxy, const char* rolename )
{
   // do not call the _Init function here since the proxy will be NULL'ed which makes problems with
   // the CPP implementation callbacks already registered...

   DSIInit();
   DSIClientInit( proxy, SERVER_NAME, rolename, SERVER_MAJOR_VERSION, SERVER_MINOR_VERSION );
   if (proxy)
   {
	   proxy->client.fnComponentConnected = ComponentConnected ;
	   proxy->client.fnComponentDisconnected = ComponentDisconnected ;
	   proxy->client.fnProcessResponse = ProcessResponse ;
	   proxy->client.fnProcessInternalEvent = ProcessInternalEvent ;
	   proxy->client.fnCleanup = Cleanup ;
   }
   return DSIClientRun( proxy );
}

int DMMAmFmTunerDiranaControlProxy_Stop( DMMAmFmTunerDiranaControlProxy* proxy, int exitcode )
{
   return DSIClientStop( proxy, exitcode );
}

int DMMAmFmTunerDiranaControlProxy_PostInternalEvent( DMMAmFmTunerDiranaControlProxy* proxy, int code, void* data )
{
   if (0 == proxy)
      return 0;
   return DSIPostInternalEvent( proxy->client.Channel.Master, proxy->client.Id, 0, code, data );
}

int DMMAmFmTunerDiranaControlProxy_SendInternalEvent( DMMAmFmTunerDiranaControlProxy* proxy, int code, void* data )
{
   if (0 != proxy)
   {
      if (proxy->client.SendChid)
      {
          return DSISendInternalEvent( proxy->client.SendChid, proxy->client.Id, 0, code, data );

      }
      else
      {

         return DSISendInternalEvent( proxy->client.Channel.Master, proxy->client.Id, 0, code, data );
      }
   }
   else
   {
      return 0;
   }
}


